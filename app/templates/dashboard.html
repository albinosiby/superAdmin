{% extends "base.html" %}

{% block header %}Dashboard{% endblock %}

{% block content %}
<div class="add-client-btn-container">
    <a href="{{ url_for('main.add_client') }}" class="btn btn-primary">
        <i class="fas fa-plus"></i> Add New Client
    </a>
</div>

<div class="client-grid">
    {% for org in organizations %}
    <div class="client-card" data-url="{{ url_for('main.view_client', uid=org.id) }}"
        onclick="window.location.href = this.dataset.url;" style="cursor: pointer;">
        <div class="client-header">
            <div class="client-logo">
                {% if org.logo and org.logo != 'default_logo.png' %}
                {% if org.logo.startswith('http') %}
                <img src="{{ org.logo }}" alt="{{ org.name }}"
                    style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                {% else %}
                <img src="{{ url_for('static', filename='images/' + org.logo) }}" alt="{{ org.name }}"
                    style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                {% endif %}
                {% else %}
                <i class="fas fa-university"></i>
                {% endif %}
            </div>
            <div class="client-info">
                <h3>{{ org.name }}</h3>
                <span>{{ org.type }}</span>
            </div>
        </div>
        <div class="client-details">
            <p><i class="fas fa-map-marker-alt"></i> {{ org.address }}</p>
            <p><i class="fas fa-phone"></i> {{ org.phone }}</p>
            <p><i class="fas fa-envelope"></i> {{ org.email }}</p>
        </div>
        <!-- <div class="client-actions" onclick="event.stopPropagation();">
            <a href="{{ url_for('main.edit_client', uid=org.id) }}" class="btn btn-primary"
                style="background-color: #f59e0b; margin-right: 5px;">
                <i class="fas fa-edit"></i> Edit
            </a>
            <form action="{{ url_for('main.delete_client', uid=org.id) }}" method="POST"
                onsubmit="return confirm('Are you sure you want to delete this client?');" style="display:inline;">
                <button type="submit" class="btn btn-danger">
                    <i class="fas fa-trash"></i> Delete
                </button>
            </form>
        </div> -->
    </div>
    {% else %}
    <p>No clients found. Click "Add New Client" to get started.</p>
    {% endfor %}
</div>
{% endblock %}